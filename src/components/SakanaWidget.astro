---
const { character = 'chisato' } = Astro.props;
---

<div id="sakana-widget"></div>

<script define:vars={{ character }}>
  document.addEventListener('DOMContentLoaded', function() {
    const link = document.createElement('link');
    link.rel = 'stylesheet';
    link.href = '/vendor/sakana/sakana.min.css';
    document.head.appendChild(link);

    const script = document.createElement('script');
    script.src = '/vendor/sakana/sakana.min.js';
    script.onload = function() {
      setTimeout(() => {
        try {
          new SakanaWidget({
            character: character
          }).mount('#sakana-widget');
        } catch (error) {
          console.error('Failed to initialize Sakana widget:', error);
        }
      }, 100);
    };
    document.body.appendChild(script);
  });
</script>

<style>
  #sakana-widget {
    position: fixed;
    right: 1px;
    bottom: 5px;
    z-index: -1;
  }
</style>